<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://storage.googleapis.com/non-spec-apps/mio-icons/latest/outline.css">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-blue.min.css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    
    <style>
      body {
        font-family: 'Roboto';
      }
      
      .mdl-layout__header-row {
        padding-left: 24px !important;
      }
      
      .mdl-chip__contact {
        height: 16px;
        width: 16px;
      }
      
      .bookmark-button {
        border-radius: 40px;
        white-space:nowrap;
      }
      
      .bookmark-list {
        line-height: 2.7em
      }
      
      #add-bookmark {
        height:30px;
        min-width:30px;
      }
      
      .fixed-button {
        position:fixed;
        left:20px;
        bottom:20px;
        z-index:3;
      }
      
      .mdl-datepicker {
        padding:0px;
        width:180px;
      }
      
      #notification-types {
        width:70px;
      }
      
      #notification-number-div {
        width:37px;
        padding:0px;
        margin-left:10px;
        margin-right:10px;
      }
      
      .list-padded {
        margin-right: 40px;
      }
      
      #time-types {
        width:55px;
      }
    </style>
    
  </head>
  <body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
          <!-- Title -->
          <span class="mdl-layout-title" id="title-text">Title</span>
          <div class="mdl-layout-spacer"></div>
          <button class="mdl-button mdl-js-button mdl-button--icon" id="settings-button">
            <i class="material-icons">settings</i>
          </button>
        </div>
      </header>
      
      <main class="mdl-layout__content">
        <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored fixed-button" type="button" id="edit" val="viewing">
          <i class="material-icons" id="edit-icon">edit</i>
        </button>
        <div class="page-content">
          <div class="tab" id="main-tab">
            <ul class="mdl-list">
              <li class="mdl-list__item">
                <span class="mdl-list__item-primary-content">
                  <i class="material-icons mdl-list__item-icon">access_time</i>
                    <span id="main-date-text">Date Time</span>
                </span>
              </li>
              
              <li class="mdl-list__item">
                <span class="mdl-list__item-primary-content">
                  <i class="material-icons mdl-list__item-icon">notifications</i>
                    <span id="main-date-text">Notifications</span>
                </span>
              </li>
              
              <li class="mdl-list__item">
                <span class="mdl-list__item-primary-content">
                  <i class="material-icons mdl-list__item-icon">calendar_today</i>
                    <button id="g-calendar-button" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
                      G Calendar
                    </button>
                </span>
              </li>
              
              <li class="mdl-list__item">
                <span class="mdl-list__item-primary-content">
                  <i class="material-icons mdl-list__item-icon">bookmarks</i>
                    Bookmarks
                </span>
                <span class="bookmark-list"></span>
              </li>
              
            </ul>
          </div>
          
          <div class="tab" id="edit-tab">
            <ul class="mdl-list list-padded">
              <li class="mdl-list__item">
                <span class="mdl-list__item-primary-content">
                  <i class="material-icons mdl-list__item-icon">access_time</i>
                  <div>
                    <div id="datepicker-div" class="mdl-textfield mdl-js-textfield mdl-datepicker">
                      <input class="mdl-textfield__input" type="date" name="date" id="datepicker" value="">
                    </div>
                    <div id="timepicker-div" class="mdl-textfield mdl-js-textfield mdl-datepicker">
                      <input class="mdl-textfield__input" type="time" id="timepicker" value="">
                    </div>
                  </div>
                </span>
              </li>
              
              <li class="mdl-list__item" id="notification-list">
                <span class="mdl-list__item-primary-content">
                  <i class="material-icons mdl-list__item-icon">notifications</i>
                    <select class="mdl-textfield__input" id="notification-types">
                        <option id="notification-types-email">Email</option>
                        <option id="notification-types-popup">Popup</option>
                        <option id="notification-types-sms">SMS</option>
                      </select>
                      <div id="notification-number-div" class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" type="number" id="notification-number" value="10">
                      </div>
                      <select class="mdl-textfield__input" id="time-types">
                        <option id="time-types-minutes">Mins</option>
                        <option id="time-types-hours">Hrs</option>
                        <option id="time-types-days">Days</option>
                      </select>
                </span>
              </li>
              
              <li class="mdl-list__item">
                <span class="mdl-list__item-primary-content">
                  <i class="material-icons mdl-list__item-icon">calendar_today</i>
                  Show Google Calendar Event
                </span>
                <span class="mdl-list__item-secondary-action">
                  <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" id="show-g-calendar-switch-label" for="show-g-calendar-switch">
                    <input type="checkbox" id="show-g-calendar-switch" class="mdl-switch__input" checked />
                  </label>
                </span>
              </li>
              
              <li class="mdl-list__item">
                <span class="mdl-list__item-primary-content">
                  <i class="material-icons mdl-list__item-icon">bookmarks</i>
                </span>
                <span class="bookmark-list"></span>
                <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored" type="button" id="add-bookmark">
                  <i class="material-icons">add</i>
                </button>
              </li>
              
            </ul>
          </div>
          
          <div class="tab" id="settings-tab">Settings</div>
          
        </div>
      </main>
      
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
      <script src="https://cdn.rawgit.com/nnattawat/flip/master/dist/jquery.flip.min.js"></script>
      
      <script>
        $(function() {
          showOnlyTab("edit-tab");
          let square = new Bookmark("WWWWWWWW", "https://www.google.com", "id");
          for(var i = 0; i<5; ++i) {
            addBookmark(square);
          }
        });
        
        //Tab methods
        function showOnlyTab(id) {
          $(".tab").each(function() {
            //alert($(this).attr("id"));
            if(id == $(this).attr("id")) {
              $(this).show();
            } else {
              $(this).hide();
            }
          });
        }
        
        $("#show-g-calendar-switch").change(function() {
          var on = $("#show-g-calendar-switch-label").is('.is-checked');
          if(on) {
            $("#notification-list").fadeOut();
          } else {
            $("#notification-list").delay(300).fadeIn();
          }
        });
        
        //Bookmark methods
        class Bookmark {
          constructor(name, url, id) {
            this.name = name;
            this.url = url;
            this.id = id;
          }
          
          get name() {return this._name;}
          set name(name) {this._name = name;}
          
          get id() {return this._id;}
          set id(id) {this._id = id;}
          
          get url() {return this._url;}
          set url(url) {this._url = url;}
        }
        
        function getPhotoUrl(bookmark) {
          return "http://s2.googleusercontent.com/s2/favicons?domain_url=" + bookmark.url;
        }
        
        function getHtml(bookmark) {
          var first = '<button class="mdl-button mdl-js-button mdl-button--raised bookmark-button text-left text-center" val="" type="button" id="';
          var second = '"><img class="mdl-chip__contact" src="';
          var third = '">';
          var fourth = '</button>';
          var shortName = bookmark.name;
          if(shortName.length>6) {
            shortName = shortName.substring(0, 5) + "...";
          }
          return first + bookmark.id + second + getPhotoUrl(bookmark) + third + shortName + fourth;
        }
        
        function createButton(bookmark) {
          var $button = $(getHtml(bookmark));
          $button.click(function() {bookmarkClick(bookmark);});
          return $button;
        }
        
        function addBookmark(bookmark) {
          $('.bookmark-list').append(createButton(bookmark));
        }
        
        function bookmarkClick(element) {
          var link = element.url;
          window.open(link);
        }
        
      </script>
      
    </div>
  </body>
</html>
